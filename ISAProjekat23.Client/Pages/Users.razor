@page "/users"

@using ISAProjekat23.Model.Domain;

@inject HttpClient Http

<PageTitle>Users</PageTitle>

<h1>Users</h1>

@if (users == null)
{
    <p><em>Loading...</em></p>
}
else
{
<table>
    <tr>
        <thead>Id</thead>
        <thead>Email</thead>
        <thead>Password</thead>
        <thead>Role</thead>
        <thead>First name</thead>
        <thead>Last name</thead>
        <thead>City</thead>
        <thead>Country</thead>
        <thead>Phone</thead>
        <thead>Occupation</thead>
        <thead>Workplace</thead>
    </tr>
    @foreach(var user in users)
    {
    <tr>
        <td>@user.Id</td>
        <td>@user.Email</td>
        <td>@user.Password</td>
        <td>@user.Role</td>
        <td>@user.FirstName</td>
        <td>@user.LastName</td>
        <td>@user.City</td>
        <td>@user.Country</td>
        <td>@user.Phone</td>
        <td>@user.Occupation</td>
        <td>@user.Workplace</td>
    </tr>
    }
</table>
}

@code {    
    private List<User>? users;

    protected override async Task OnInitializedAsync()
    {
        users = await Http.GetFromJsonAsync<List<User>>("https://localhost:7241/User/GetAllUsers");
    }
}
