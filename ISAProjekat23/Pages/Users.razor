@page "/users"

@using ISAProjekat23.Model.Domain;

@inject HttpClient Http

<PageTitle>User</PageTitle>

<h1>Users</h1>

@if (users == null)
{
    <p><em>Loading...</em></p>
}
else
{
<table>
    <tr>
        <thead>Username</thead>
        <thead>First name</thead>
        <thead>Last name</thead>
        <thead>Email</thead>
    </tr>
    @foreach(var user in users)
    {
        <tr>
            <td>@user.Username</td>
            <td>@user.FirstName</td>
            <td>@user.LastName</td>
            <td>@user.Email</td>
        </tr>
    }
</table>
}

@code {    
    private List<User> users;

    protected override async Task OnInitializedAsync()
    {
        users = await Http.GetFromJsonAsync<List<User>>("https://localhost:7241/User/GetAllUsers");
    }
}
